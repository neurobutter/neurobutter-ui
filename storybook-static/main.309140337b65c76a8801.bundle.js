(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{196:function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(193),createClass=__webpack_require__(194),possibleConstructorReturn=__webpack_require__(198),getPrototypeOf=__webpack_require__(195),assertThisInitialized=__webpack_require__(82),inherits=__webpack_require__(197),react=__webpack_require__(20),react_default=__webpack_require__.n(react),jointjs=__webpack_require__(10),jointjs_default=__webpack_require__.n(jointjs),DagNode=jointjs_default.a.dia.Element.define("dag.Node",{size:{width:150,height:50},inPorts:["in"],outPorts:["out"],ports:{groups:{out:{position:{name:"absolute",args:{x:"50%",y:"100%"}},attrs:{".port-body":{stroke:"black",fill:"red",strokeWidth:2,height:10,width:20,refX:-10,refY:-5,opacity:1,magnet:!0}},markup:'<rect class="port-body"/>'}},items:[{group:"out",args:{}}]},attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF",rx:10,ry:10},label:{fontSize:15,refX:"50%",refY:"50%",textVerticalAnchor:"middle",textAnchor:"middle",textWrap:{text:"",width:-25,height:"80%",ellipsis:!0},style:"-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],setText:function setText(text){return this.attr("label/textWrap/text",text||"")}}),LINK_STROKE_WIDTH=(new jointjs_default.a.shapes.devs.Model({position:{x:50,y:50},size:{width:90,height:90},inPorts:["in1","in2"],outPorts:["out"],ports:{groups:{in:{attrs:{".port-body":{fill:"#16A085"}}},out:{attrs:{".port-body":{fill:"#E74C3C"}}}}},attrs:{".label":{text:"Model","ref-x":.5,"ref-y":.2},rect:{fill:"#2ECC71"}}}),jointjs_default.a.dia.Link.define("dag.Edge",{attrs:{line:{connection:!0,stroke:"gray",strokeWidth:2,pointerEvents:"none",targetMarker:{type:"path",fill:"gray",stroke:"none",d:"M 10 -10 0 0 10 10 z"}}},router:{name:"manhattan"},connector:{name:"rounded"},z:-1,weight:0,minLen:0,labels:[{markup:[{tagName:"rect",selector:"labelBody"},{tagName:"text",selector:"labelText"}],size:{width:100,height:50},attrs:{labelText:{fill:"gray",textAnchor:"middle",textVerticalAnchor:"middle",fontSize:15,cursor:"pointer"},labelBody:{ref:"labelText",fill:"lightgray",stroke:"gray",strokeWidth:1,refWidth:"150%",refHeight:"150%",yAlignment:"middle",xAlignment:"middle"}}}]},{markup:[{tagName:"path",selector:"line",attributes:{fill:"none"}}],connect:function connect(sourceId,targetId){return this.set({source:{id:sourceId},target:{id:targetId}})},setLabelText:function setLabelText(text){return this.prop("labels/0/attrs/labelText/text",text||"")}}),1),LINK_HIGHLIGHTED_STROKE_WIDTH=2,SimpleDagEditor_SimpleDagEditor=function(_React$Component){function SimpleDagEditor(props){var _this;return Object(classCallCheck.a)(this,SimpleDagEditor),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(SimpleDagEditor).call(this,props))).buildDag=function(nodes,edges){var elements=nodes.map(function(n){return new DagNode({id:n.id}).setText(n.title)}),links=edges.map(function(e){return new jointjs_default.a.shapes.standard.Link({source:{id:e.from},target:{id:e.to},connector:{name:"rounded"},attrs:{line:{stroke:"black",strokeWidth:LINK_STROKE_WIDTH}}}).router("metro",{startDirections:["bottom"],endDirections:["top"]})});return elements.concat(links)},_this.layout=function(dag){var self=Object(assertThisInitialized.a)(_this),paper=new jointjs_default.a.dia.Paper({el:_this.paperContainer.current,width:1e3,height:600,gridSize:10,model:new jointjs_default.a.dia.Graph,linkPinning:!1,markAvailable:!0,multiLinks:!1,snapLinks:!0,validateConnection:function validateConnection(cellViewS,magnetS,cellViewT,magnetT,end,linkView){return cellViewS!==cellViewT&&((!magnetT||"out"!==magnetT.getAttribute("port-group"))&&(!!cellViewT.model.isElement()||void 0))},defaultLink:function defaultLink(elementView,magnet){return new jointjs_default.a.shapes.standard.Link({connector:{name:"rounded"},attrs:{line:{stroke:"black",strokeWidth:LINK_STROKE_WIDTH}}}).router("metro",{startDirections:["bottom"],endDirections:["top"]})}});jointjs_default.a.layout.DirectedGraph.layout(dag,{ranker:"tight-tree",rankDir:"TB",align:"UL",rankSep:100,edgeSep:100,nodeSep:100}),0===paper.model.getCells().length&&paper.model.resetCells(dag),paper.fitToContent({padding:10,allowNewOrigin:"any"}),paper.model.on("change:position",function(cell){var allCells=paper.model.getCells();allCells.indexOf(cell)>-1&&(console.log("updating..."),allCells.forEach(function(link){paper.findViewByModel(link).update()}))}),paper.on("blank:pointerdblclick",function(cellView){self.clearLinkSelection(paper)}),paper.on("cell:pointerdblclick",function(cellView){console.log(cellView.model.id)}),paper.on("link:mouseenter",function(linkView){linkView.showTools()}),paper.on("link:mouseleave",function(linkView){}),paper.on("link:pointerdown",function(linkView){self.clearLinkSelection(paper),self.selectLink(linkView,paper),linkView.startArrowheadMove("target")})},_this.clearLinkSelection=function(paper){paper.model.getLinks().forEach(function(l){var linkView=l.findView(paper);linkView.model.attr("line/stroke","black"),linkView.model.attr("line/strokeWidth",LINK_STROKE_WIDTH),linkView.model.toBack(),linkView.removeTools()})},_this.selectLink=function(linkView){linkView.model.attr("line/stroke","red"),linkView.model.attr("line/strokeWidth",LINK_HIGHLIGHTED_STROKE_WIDTH),linkView.model.toFront();var verticesTool=new jointjs_default.a.linkTools.Vertices({vertexAdding:!1}),targetArrowheadTool=new jointjs_default.a.linkTools.TargetArrowhead,removeButton=new jointjs_default.a.linkTools.Remove({focusOpacity:.5,rotate:!1,distance:0,offset:0});linkView.addTools(new jointjs_default.a.dia.ToolsView({tools:[verticesTool,targetArrowheadTool,removeButton]}))},_this.paperContainer=react_default.a.createRef(),_this}return Object(inherits.a)(SimpleDagEditor,_React$Component),Object(createClass.a)(SimpleDagEditor,[{key:"componentWillMount",value:function componentWillMount(){}},{key:"componentDidMount",value:function componentDidMount(){var dag=this.buildDag(this.props.nodes,this.props.edges);this.layout(dag)}},{key:"render",value:function render(){return react_default.a.createElement("div",{id:"paper",className:"paper",ref:this.paperContainer})}}]),SimpleDagEditor}(react_default.a.Component);__webpack_exports__.a=SimpleDagEditor_SimpleDagEditor},199:function(module,exports,__webpack_require__){__webpack_require__(200),__webpack_require__(286),module.exports=__webpack_require__(287)},287:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(81);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(function loadStories(){__webpack_require__(353)},module)}.call(this,__webpack_require__(134)(module))},353:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81),_components_SimpleDagEditor__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(354),__webpack_require__(196)),nodes=[{id:"1",title:"node 1"},{id:"2",title:"long nody node node node really really long node let's see what happens"},{id:"3",title:"node 3"},{id:"4",title:"node 4"},{id:"5",title:"node 5"}],edges=[{from:"1",to:"3",weight:"33%"},{from:"2",to:"4",weight:"100%"},{from:"1",to:"4",weight:"33%"},{from:"1",to:"5",weight:"33%"},{from:"4",to:"5",weight:"100%"}];Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("SimpleDagEditor",module).add("basic",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SimpleDagEditor__WEBPACK_IMPORTED_MODULE_3__.a,{nodes:nodes,edges:edges})})}.call(this,__webpack_require__(134)(module))}},[[199,1,2]]]);
//# sourceMappingURL=main.309140337b65c76a8801.bundle.js.map